"use strict";(self.webpackChunkmatx_react=self.webpackChunkmatx_react||[]).push([[5931],{869:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(4535),i=a(579);const n=(0,r.Ay)("div")((()=>({height:"100%",display:"flex",position:"relative"}))),o=e=>{let{children:t}=e;return(0,i.jsx)(n,{children:t})}},4023:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(4535),i=a(579);const n=(0,r.Ay)("div")((()=>({flexGrow:1,height:"100%",position:"relative"}))),o=e=>{let{children:t}=e;return(0,i.jsx)(n,{children:t})}},5931:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var r=a(4535),i=a(6240),n=a(3600),o=a(6446),s=a(2110),c=a(1880),d=a(6242),l=a(869),p=a(4023),u=a(5043),h=a(2143),m=a(4692),x=a(7392),g=a(4208),v=a(9336),b=a(2788),A=a(4010),f=a(2770),y=a(2351),j=a(4092),w=a(3288),C=a(9787),k=a(864),S=a.n(k),I=a(1803),z=a.n(I),M=a(5212),R=a(579);const L=(0,r.Ay)(y.aZ)((e=>{let{theme:t}=e;return{width:220,height:220,overflow:"hidden",borderRadius:"300px",boxShadow:M.p[6],background:t.palette.background.default,"& span":{fontSize:"4rem"}}})),N=()=>(0,R.jsx)(L,{children:(0,R.jsx)(g.A,{color:"primary",children:"chat"})}),O=(0,r.Ay)(o.A)((()=>({height:450,display:"flex",position:"relative",flexDirection:"column",background:"rgba(0, 0, 0, 0.05)"}))),F=(0,r.Ay)(y.Ao)((e=>{let{theme:t}=e;return{padding:"4px",background:t.palette.primary.main}})),T=(0,r.Ay)("h5")((()=>({color:"#fff",fontSize:"18px",fontWeight:"500",whiteSpace:"pre",marginLeft:"16px"}))),V=(0,r.Ay)("div")((e=>{let{theme:t,userId:a,contactId:r}=e;return{padding:"8px 16px",marginBottom:"8px",borderRadius:"4px",color:a===r&&"#fff",background:a===r?t.palette.primary.main:t.palette.background.paper}})),G=(0,r.Ay)(h.A)((()=>({display:"flex",alignItems:"center","& .icon":{marginRight:"16px"}}))),B=(0,r.Ay)(S())((()=>({flexGrow:1,position:"relative"}))),D=(0,r.Ay)(y.aZ)((()=>({flexGrow:1,height:"100%",flexDirection:"column"}))),U=(0,r.Ay)("div")((()=>({display:"flex",alignItems:"flex-start",padding:"12px 16px"}))),W=e=>{let{id:t,toggleSidenav:a,currentChatRoom:r,opponentUser:n,messageList:s=[],handleMessageSend:c}=e;const[d,l]=(0,u.useState)(""),p=(0,i.A)().palette.text.secondary;return(0,R.jsxs)(O,{children:[(0,R.jsxs)(F,{children:[(0,R.jsxs)(o.A,{display:"flex",alignItems:"center",children:[(0,R.jsx)(m.A,{mdUp:!0,children:(0,R.jsx)(x.A,{size:"large",onClick:a,children:(0,R.jsx)(g.A,{sx:{color:"#fff"},children:"short_text"})})}),(0,R.jsx)(m.A,{smDown:!0,children:(0,R.jsx)(o.A,{pl:"12px"})}),n&&(0,R.jsxs)(u.Fragment,{children:[(0,R.jsx)(f.A,{src:n.avatar,status:n.status}),(0,R.jsx)(T,{children:n.name})]})]}),(0,R.jsxs)(j.A,{menuButton:(0,R.jsx)(x.A,{size:"large",children:(0,R.jsx)(g.A,{sx:{color:"#fff"},children:"more_vert"})}),children:[(0,R.jsxs)(G,{children:[(0,R.jsx)(g.A,{className:"icon",children:"account_circle"})," Contact"]}),(0,R.jsxs)(G,{children:[(0,R.jsx)(g.A,{className:"icon",children:"volume_mute"})," Mute"]}),(0,R.jsxs)(G,{children:[(0,R.jsx)(g.A,{className:"icon",children:"delete"})," Clear Chat"]})]})]}),(0,R.jsxs)(B,{id:"chat-message-list",children:[""===r&&(0,R.jsxs)(D,{children:[(0,R.jsx)(N,{}),(0,R.jsx)("p",{children:"Select a contact"})]}),s.map(((e,a)=>(0,R.jsxs)(U,{children:[(0,R.jsx)(f.A,{src:e.avatar,status:e.status}),(0,R.jsxs)(o.A,{ml:2,children:[(0,R.jsx)(w.fz,{sx:{m:0,mb:1,color:p},children:e.name}),(0,R.jsx)(V,{userId:t,contactId:e.contactId,children:(0,R.jsx)(w.L9,{sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.text})}),(0,R.jsxs)(w.Oc,{sx:{m:0,color:p},children:[(0,C.h0)(new Date(e.time))," ago"]})]})]},z().generate())))]}),(0,R.jsx)(v.A,{}),""!==r&&(0,R.jsxs)(o.A,{px:2,py:1,display:"flex",alignItems:"center",children:[(0,R.jsx)(b.A,{rows:1,fullWidth:!0,value:d,multiline:!0,variant:"outlined",onKeyUp:e=>{if("Enter"===e.key&&!e.shiftKey){let e=d.trim();""!==e&&c(e),l("")}},label:"Type your message here*",onChange:e=>l(e.target.value)}),(0,R.jsx)("div",{children:(0,R.jsx)(A.A,{onClick:()=>{""!==d.trim()&&c(d),l("")},color:"primary",sx:{ml:2},children:(0,R.jsx)(g.A,{children:"send"})})})]})]})};var H=a(7154);const _=e=>H.A.get("/api/chat/contacts",{data:e}),P=e=>H.A.post("/api/chat/add",e);var X=a(1121);const E=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{height:450,borderRight:"1px solid rgba(0, 0, 0, 0.08)",background:t.palette.background.default}})),K=(0,r.Ay)(S())((()=>({height:"100%",position:"relative"}))),Z=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{height:56,display:"flex",paddingLeft:"16px",paddingRight:"16px",alignItems:"center",background:t.palette.primary.main}})),q=(0,r.Ay)("h5")((()=>({color:"#fff",marginBottom:0,fontSize:"18px",fontWeight:"500",whiteSpace:"pre",marginLeft:"16px"}))),Y=(0,r.Ay)("div")((()=>({padding:"16px",display:"flex",cursor:"pointer",alignItems:"center",transition:"background 250ms ease","&:hover":{background:"rgba(0, 0, 0, 0.054)"}}))),J=e=>{let{currentUser:t,contactList:a=[],handleContactClick:r,recentContactList:n=[]}=e;const s=(0,i.A)().palette.text.secondary;return(0,R.jsxs)(E,{children:[(0,R.jsxs)(Z,{children:[(0,R.jsx)(f.A,{src:t.avatar,status:t.status}),(0,R.jsx)(q,{children:t.name})]}),(0,R.jsxs)(K,{children:[n.map(((e,t)=>(0,R.jsxs)(Y,{onClick:()=>r(e.id),children:[(0,R.jsx)(f.A,{src:e.avatar,status:e.status}),(0,R.jsxs)(o.A,{pl:2,children:[(0,R.jsx)(w.fz,{sx:{m:"0"},children:e.name}),(0,R.jsx)(w.fz,{sx:{m:0,color:s},children:(0,X.GP)(new Date(e.lastChatTime).getTime(),"MMMM dd, yyyy")})]})]},t))),(0,R.jsx)(v.A,{}),a.map(((e,t)=>(0,R.jsxs)(Y,{sx:{padding:"4px 16px"},onClick:()=>r(e.id),children:[(0,R.jsx)(f.A,{src:e.avatar,status:e.status}),(0,R.jsx)(o.A,{pl:2,children:(0,R.jsx)("p",{children:e.name})})]},t)))]})]})},Q=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"}}}})),$=()=>{const e=document.querySelector("#chat-message-list"),[t,a]=(0,u.useState)(!0),[r,h]=(0,u.useState)({id:"7863a6802ez0e277a0f98534"}),[m,x]=(0,u.useState)(null),[g,v]=(0,u.useState)(""),[b,A]=(0,u.useState)([]),[f,y]=(0,u.useState)([]),[j,w]=(0,u.useState)([]),C=(0,u.useRef)(r),k=(0,i.A)(),S=(0,n.A)(k.breakpoints.down("sm")),I=(0,u.useCallback)((()=>{let{id:e}=C.current;(e=>H.A.get("/api/chat/contacts/recent",{data:e}))(e).then((e=>{y(e.data)}))}),[]);(0,u.useEffect)((()=>{let{id:e}=C.current;var t;_(e).then((e=>{a(S),h({...e.data})})),(t=r.id,H.A.get("/api/chat/contacts/all",{data:t})).then((e=>A(e.data))),I()}),[S,r.id,I]);const z=()=>{e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},M=()=>a(!t);return(0,R.jsxs)(Q,{children:[(0,R.jsx)(o.A,{className:"breadcrumb",children:(0,R.jsx)(c.A,{routeSegments:[{name:"Chat"}]})}),(0,R.jsx)(s.A,{elevation:6,children:(0,R.jsxs)(l.A,{children:[(0,R.jsx)(d.A,{width:"230px",open:t,toggleSidenav:M,children:(0,R.jsx)(J,{currentUser:r,contactList:b,recentContactList:f,handleContactClick:e=>{S&&M(),_(e).then((e=>{let{data:t}=e;x({...t})})),((e,t)=>H.A.get("/api/chat/chat-room",{data:{currentUser:e,contactId:t}}))(r.id,e).then((e=>{let{data:t}=e,{chatId:a,messageList:r,recentListUpdated:i}=t;v(a),w(r),z(),i&&I()}))}})}),(0,R.jsx)(p.A,{children:(0,R.jsx)(W,{id:null===r||void 0===r?void 0:r.id,opponentUser:m,messageList:j,currentChatRoom:g,handleMessageSend:e=>{let{id:t}=r;""!==g&&(P({chatId:g,text:e,contactId:t,time:new Date}).then((e=>{w([...e.data]),z()})),setTimeout((()=>{P({chatId:g,text:"Hi, I'm ".concat(m.name,". Your imaginary friend."),contactId:m.id,time:new Date}).then((e=>{w([...e.data]),z()}))}),750))},toggleSidenav:M})})]})})]})}},4010:(e,t,a)=>{a.d(t,{A:()=>A});var r=a(8587),i=a(8168),n=a(5043),o=a(8387),s=a(8606),c=a(6236),d=a(6803),l=a(2876),p=a(7056),u=a(2400);function h(e){return(0,u.Ay)("MuiFab",e)}const m=(0,p.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var x=a(4535),g=a(579);const v=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],b=(0,x.Ay)(c.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,x.ep)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t["size".concat((0,d.A)(a.size))],"inherit"===a.color&&t.colorInherit,t[(0,d.A)(a.size)],t[a.color]]}})((e=>{let{theme:t,ownerState:a}=e;var r,n;return(0,i.A)({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:null==(r=(n=t.palette).getContrastText)?void 0:r.call(n,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},["&.".concat(m.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]}},"small"===a.size&&{width:40,height:40},"medium"===a.size&&{width:48,height:48},"extended"===a.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===a.variant&&"small"===a.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===a.variant&&"medium"===a.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===a.color&&{color:"inherit"})}),(e=>{let{theme:t,ownerState:a}=e;return(0,i.A)({},"inherit"!==a.color&&"default"!==a.color&&null!=(t.vars||t).palette[a.color]&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}}})}),(e=>{let{theme:t}=e;return{["&.".concat(m.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),A=n.forwardRef((function(e,t){const a=(0,l.A)({props:e,name:"MuiFab"}),{children:n,className:c,color:p="default",component:u="button",disabled:m=!1,disableFocusRipple:x=!1,focusVisibleClassName:A,size:f="large",variant:y="circular"}=a,j=(0,r.A)(a,v),w=(0,i.A)({},a,{color:p,component:u,disabled:m,disableFocusRipple:x,size:f,variant:y}),C=(e=>{const{color:t,variant:a,classes:r,size:n}=e,o={root:["root",a,"size".concat((0,d.A)(n)),"inherit"===t?"colorInherit":t]},c=(0,s.A)(o,h,r);return(0,i.A)({},r,c)})(w);return(0,g.jsx)(b,(0,i.A)({className:(0,o.A)(C.root,c),component:u,disabled:m,focusRipple:!x,focusVisibleClassName:(0,o.A)(C.focusVisible,A),ownerState:w,ref:t},j,{classes:C,children:n}))}))},1424:(e,t,a)=>{a.d(t,{A:()=>o,f:()=>n});var r=a(7056),i=a(2400);function n(e){return(0,i.Ay)("MuiListItemIcon",e)}const o=(0,r.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},8052:(e,t,a)=>{a.d(t,{A:()=>o,b:()=>n});var r=a(7056),i=a(2400);function n(e){return(0,i.Ay)("MuiListItemText",e)}const o=(0,r.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},2143:(e,t,a)=>{a.d(t,{A:()=>k});var r=a(8587),i=a(8168),n=a(5043),o=a(8387),s=a(8606),c=a(310),d=a(4535),l=a(2876),p=a(1347),u=a(6236),h=a(5013),m=a(5849),x=a(5658),g=a(1424),v=a(8052),b=a(7056),A=a(2400);function f(e){return(0,A.Ay)("MuiMenuItem",e)}const y=(0,b.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var j=a(579);const w=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],C=(0,d.Ay)(u.A,{shouldForwardProp:e=>(0,d.ep)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:a}=e;return(0,i.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(y.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(y.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(y.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(y.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(y.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(x.A.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(x.A.inset)]:{marginLeft:52},["& .".concat(v.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(v.A.inset)]:{paddingLeft:36},["& .".concat(g.A.root)]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,i.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(g.A.root," svg")]:{fontSize:"1.25rem"}}))})),k=n.forwardRef((function(e,t){const a=(0,l.A)({props:e,name:"MuiMenuItem"}),{autoFocus:c=!1,component:d="li",dense:u=!1,divider:x=!1,disableGutters:g=!1,focusVisibleClassName:v,role:b="menuitem",tabIndex:A,className:y}=a,k=(0,r.A)(a,w),S=n.useContext(p.A),I=n.useMemo((()=>({dense:u||S.dense||!1,disableGutters:g})),[S.dense,u,g]),z=n.useRef(null);(0,h.A)((()=>{c&&z.current&&z.current.focus()}),[c]);const M=(0,i.A)({},a,{dense:I.dense,divider:x,disableGutters:g}),R=(e=>{const{disabled:t,dense:a,divider:r,disableGutters:n,selected:o,classes:c}=e,d={root:["root",a&&"dense",t&&"disabled",!n&&"gutters",r&&"divider",o&&"selected"]},l=(0,s.A)(d,f,c);return(0,i.A)({},c,l)})(a),L=(0,m.A)(z,t);let N;return a.disabled||(N=void 0!==A?A:-1),(0,j.jsx)(p.A.Provider,{value:I,children:(0,j.jsx)(C,(0,i.A)({ref:L,role:b,tabIndex:N,component:d,focusVisibleClassName:(0,o.A)(R.focusVisible,v),className:(0,o.A)(R.root,y)},k,{ownerState:M,classes:R}))})}))}}]);
//# sourceMappingURL=5931.91d11345.chunk.js.map