"use strict";(self.webpackChunkmatx_react=self.webpackChunkmatx_react||[]).push([[8834],{8834:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var r=t(4535),a=t(2110),s=t(5043),i=t(3216),l=t(6446),o=t(8977),c=t(2788),d=t(3193),x=t(4714),h=t(4605),m=t(4256),u=t(9336),p=t(4882),A=t(8076),j=t(2420),f=t(3460),g=t(2351),v=t(3288),b=t(1803),y=t.n(b),w=t(6135),C=t(6208),z=t(579);const S=(0,r.Ay)("h5")({fontSize:15}),k=(0,r.Ay)(g.pT)({justifyContent:"flex-end"}),N=(0,r.Ay)(l.A)({display:"flex",justifyContent:"space-between","& .label":{height:32}}),I={id:"",vat:"",item:[],status:"",orderNo:"",currency:"",loading:!1,date:new Date,buyer:{name:"",address:""},seller:{name:"",address:""}},W=e=>{let{isNewInvoice:n,toggleInvoiceEditor:t}=e;const{id:r}=(0,i.g)(),a=(0,i.Zp)(),[b,W]=(0,s.useState)(!0),[R,M]=(0,s.useState)(I),P=e=>{e.persist(),M({...R,[e.target.name]:e.target.value})},E=(e,n)=>{e.persist(),M({...R,[n]:{...R[n],[e.target.name]:e.target.value}})},_=(e,n)=>{let t=[...R.item];t.forEach(((t,r)=>{n===r&&(t[e.target.name]=e.target.value)})),M({...R,item:t})};(0,s.useEffect)((()=>{n?M((e=>({...e,id:y().generate()}))):(0,w.kc)(r).then((e=>{let{data:n}=e;b&&M({...n})}))}),[r,n,b]),(0,s.useEffect)((()=>()=>W(!1)),[]);let O=0,{vat:T,buyer:G,seller:L,status:B,orderNo:D,loading:F,currency:$,item:H=[]}=R;return(0,z.jsx)(l.A,{py:2,className:"invoice-viewer",children:(0,z.jsxs)("form",{onSubmit:()=>{M({...R,loading:!0});let e={...R};delete e.loading,n?(0,w.Jx)(e).then((()=>{M({...R,loading:!1}),a("/invoice/".concat(R.id)),t()})):(0,w.Dq)(e).then((()=>{M({...R,loading:!1}),t()}))},children:[(0,z.jsxs)(k,{mb:3,px:2,gap:2,className:"viewer_actions",children:[(0,z.jsx)(o.A,{type:"button",variant:"text",onClick:()=>t(),children:"Cancel"}),(0,z.jsx)(o.A,{type:"submit",color:"primary",variant:"contained",disabled:F,children:"Save"})]}),(0,z.jsxs)(N,{px:2,mb:2,className:"viewer__order-info",children:[(0,z.jsxs)(l.A,{children:[(0,z.jsx)(S,{sx:{mb:1},children:"Order Info"}),(0,z.jsx)(v.fz,{sx:{mb:2},children:"Order Number"}),(0,z.jsx)(c.A,{fullWidth:!0,type:"text",name:"orderNo",value:D,label:"Order No.",onChange:P})]}),(0,z.jsxs)(l.A,{children:[(0,z.jsx)(d.A,{component:"fieldset",sx:{mb:2,width:"100%"},children:(0,z.jsxs)(x.A,{"aria-label":"status",name:"status",value:B,onChange:P,children:[(0,z.jsx)(h.A,{value:"pending",label:"Pending",className:"label",labelPlacement:"start",control:(0,z.jsx)(m.A,{color:"secondary"})}),(0,z.jsx)(h.A,{className:"label",value:"processing",label:"Processing",labelPlacement:"start",control:(0,z.jsx)(m.A,{color:"secondary"})}),(0,z.jsx)(h.A,{className:"label",value:"delivered",label:"Delivered",labelPlacement:"start",control:(0,z.jsx)(m.A,{color:"secondary"})})]})}),(0,z.jsx)(l.A,{textAlign:"right",children:(0,z.jsx)(S,{sx:{fontWeight:"500"},children:(0,z.jsx)("strong",{children:"Order date: "})})})]})]}),(0,z.jsx)(u.A,{}),(0,z.jsxs)(g.Ao,{flexWrap:"nowrap",gap:2,px:2,mb:2,children:[(0,z.jsxs)(l.A,{maxWidth:400,width:"100%",children:[(0,z.jsx)(S,{sx:{mb:"20px"},children:"Bill From"}),(0,z.jsx)(c.A,{fullWidth:!0,name:"name",type:"text",sx:{mb:"20px"},label:"Seller Name",value:L?L.name:null,onChange:e=>E(e,"seller")}),(0,z.jsx)(c.A,{rows:4,fullWidth:!0,type:"text",name:"address",multiline:!0,label:"Seller Name",value:L?L.address:null,onChange:e=>E(e,"seller")})]}),(0,z.jsxs)(l.A,{maxWidth:400,width:"100%",children:[(0,z.jsx)(S,{sx:{mb:"20px"},children:"Bill To"}),(0,z.jsx)(c.A,{fullWidth:!0,type:"text",name:"name",label:"Buyer Name",sx:{mb:"20px"},value:G?G.name:null,onChange:e=>E(e,"buyer")}),(0,z.jsx)(c.A,{rows:4,fullWidth:!0,type:"text",name:"address",multiline:!0,label:"Buyer Address",value:G?G.address:null,onChange:e=>E(e,"buyer")})]})]}),(0,z.jsxs)(C.I,{children:[(0,z.jsx)(p.A,{children:(0,z.jsxs)(A.A,{children:[(0,z.jsx)(j.A,{children:"#"}),(0,z.jsx)(j.A,{children:"Item Name"}),(0,z.jsx)(j.A,{align:"center",children:"Unit Price"}),(0,z.jsx)(j.A,{align:"center",children:"Unit"}),(0,z.jsx)(j.A,{align:"center",children:"Cost"}),(0,z.jsx)(j.A,{align:"center",children:"Action"})]})}),(0,z.jsx)(f.A,{children:H.map(((e,n)=>(O+=e.price*e.unit,(0,z.jsxs)(A.A,{children:[(0,z.jsx)(j.A,{align:"left",children:n+1}),(0,z.jsx)(j.A,{align:"left",children:(0,z.jsx)(c.A,{fullWidth:!0,type:"text",name:"name",size:"small",label:"Item Name",value:e?e.name:null,onChange:e=>_(e,n)})}),(0,z.jsx)(j.A,{align:"center",children:(0,z.jsx)(c.A,{fullWidth:!0,name:"price",size:"small",type:"number",label:"Item Price",value:e?e.price:null,onChange:e=>_(e,n),style:{maxWidth:100}})}),(0,z.jsx)(j.A,{align:"center",children:(0,z.jsx)(c.A,{fullWidth:!0,name:"unit",size:"small",type:"number",label:"Item Unit",value:e?e.unit:null,onChange:e=>_(e,n),style:{maxWidth:100}})}),(0,z.jsxs)(j.A,{align:"center",children:["$",e.unit*e.price]}),(0,z.jsx)(j.A,{align:"center",children:(0,z.jsx)(o.A,{onClick:()=>(e=>{let n=[...R.item];n.splice(e,1),M({...R,item:n})})(n),children:"Delete"})})]},n))))})]}),(0,z.jsx)(k,{p:2,children:(0,z.jsx)(o.A,{variant:"contained",onClick:()=>{let e=[...R.item];e.push({name:"",unit:"",price:""}),M({...R,item:e})},children:"Add Item"})}),(0,z.jsxs)(l.A,{px:2,py:1,maxWidth:300,marginLeft:"auto",children:[(0,z.jsxs)(g.Ao,{mb:2,children:[(0,z.jsx)(v.fz,{children:"Sub Total:"}),(0,z.jsxs)(v.fz,{children:["$",O]})]}),(0,z.jsxs)(g.Ao,{mb:2,children:[(0,z.jsx)(v.fz,{flexGrow:1,children:"Vat(%):"}),(0,z.jsx)(c.A,{name:"vat",label:"Vat",value:T,size:"small",type:"number",onChange:P,style:{maxWidth:100}})]}),(0,z.jsxs)(g.Ao,{mb:2,children:[(0,z.jsx)(v.fz,{flexGrow:1,children:"currency:"}),(0,z.jsx)(c.A,{type:"text",size:"small",name:"currency",label:"Currency",value:$,onChange:P,sx:{maxWidth:100}})]}),(0,z.jsxs)(g.Ao,{children:[(0,z.jsx)(v.H5,{children:"Grand Total:"}),(0,z.jsxs)(v.H5,{children:["$",O+O*T/100]})]})]})]})})},R=(0,r.Ay)(a.A)((e=>{let{theme:n}=e;return{margin:"30px",[n.breakpoints.down("sm")]:{margin:"16px"}}})),M=()=>{const{id:e}=(0,i.g)(),[n,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!1),l=()=>{t(!n),a(!1)};return(0,s.useEffect)((()=>{"add"===e&&(t(!0),a(!0))}),[e]),(0,z.jsx)(R,{elevation:6,children:n?(0,z.jsx)(W,{toggleInvoiceEditor:l,isNewInvoice:r}):(0,z.jsx)(C.A,{toggleInvoiceEditor:l})})}},6135:(e,n,t)=>{t.d(n,{Dq:()=>o,Jx:()=>l,LD:()=>a,kc:()=>s,r$:()=>i});var r=t(7154);const a=()=>r.A.get("/api/invoices/all"),s=e=>r.A.get("/api/invoices",{data:e}),i=e=>r.A.post("/api/invoices/delete",e),l=e=>r.A.post("/api/invoices/add",e),o=e=>r.A.post("/api/invoices/update",e)},6208:(e,n,t)=>{t.d(n,{A:()=>S,I:()=>z});var r=t(4535),a=t(1806),s=t(6446),i=t(7392),l=t(4208),o=t(8977),c=t(9336),d=t(4882),x=t(8076),h=t(2420),m=t(3460),u=t(2351),p=t(3288),A=t(1121),j=t(5043),f=t(3216),g=t(5475),v=t(6135),b=t(579);const y=(0,r.Ay)(u.Ao)((()=>({paddingLeft:"16px",paddingRight:"16px",marginBottom:"20px",alignItems:"center","& button":{fontSize:"13px",textTransform:"capitalize"}}))),w=(0,r.Ay)("div")((()=>({textAlign:"right","& h5":{fontWeight:"500",textTransform:"capitalize"}}))),C=(0,r.Ay)(p.H5)((()=>({fontSize:15,"& span":{fontWeight:"normal"}}))),z=(0,r.Ay)(a.A)((e=>{let{theme:n}=e;return{"& thead":{"& tr":{background:n.palette.background.default,"& th":{paddingLeft:0,paddingRight:0},"& th:first-of-type":{paddingLeft:"24px !important",[n.breakpoints.down("sm")]:{paddingLeft:"16px !important"}}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"},"& td:first-of-type":{paddingLeft:"24px !important",[n.breakpoints.down("sm")]:{paddingLeft:"16px !important"}}}}}})),S=e=>{let{toggleInvoiceEditor:n}=e;const{id:t}=(0,f.g)(),[r,a]=(0,j.useState)({});(0,j.useEffect)((()=>{"add"!==t&&(0,v.kc)(t).then((e=>{a({...e.data})}))}),[t]);let S=0,{orderNo:k,buyer:N,seller:I,item:W=[],status:R,vat:M,date:P}=r;return(0,b.jsxs)(s.A,{py:2,className:"invoice-viewer",children:[(0,b.jsxs)(y,{className:"viewer_actions",children:[(0,b.jsx)(g.N_,{to:"/invoice/list",children:(0,b.jsx)(i.A,{children:(0,b.jsx)(l.A,{children:"arrow_back"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.A,{sx:{mr:2,py:1},variant:"contained",color:"primary",onClick:()=>n(),children:"Edit Invoice"}),(0,b.jsx)(o.A,{sx:{py:1},onClick:()=>window.print(),variant:"contained",color:"secondary",children:"Print Invoice"})]})]}),(0,b.jsxs)("div",{id:"print-area",children:[(0,b.jsxs)(u.Ao,{px:2,mb:2,className:"viewer__order-info",children:[(0,b.jsxs)(s.A,{children:[(0,b.jsx)(C,{sx:{mb:1},children:"Order Info"}),(0,b.jsx)(p.fz,{sx:{mb:2},children:"Order Number"}),(0,b.jsxs)(p.fz,{children:["# ",k]})]}),(0,b.jsxs)(w,{children:[(0,b.jsxs)(C,{sx:{mb:1},children:[(0,b.jsx)("strong",{children:"Order status: "}),(0,b.jsx)("span",{children:R})]}),(0,b.jsxs)(C,{children:[(0,b.jsx)("strong",{children:"Order date: "}),(0,b.jsx)("span",{children:P?(0,A.GP)(new Date(P).getTime(),"MMMM dd, yyyy"):""})]})]})]}),(0,b.jsx)(c.A,{}),(0,b.jsxs)(u.Ao,{px:2,py:"20px",mb:2,className:"viewer__billing-info",children:[(0,b.jsxs)(s.A,{children:[(0,b.jsx)(C,{sx:{mb:1},children:"Bill From"}),(0,b.jsx)(p.fz,{sx:{mb:2},children:I?I.name:null}),(0,b.jsx)(p.fz,{sx:{whiteSpace:"pre"},children:I?I.address:null})]}),(0,b.jsxs)(s.A,{width:"100%",textAlign:"right",children:[(0,b.jsx)(C,{sx:{mb:1},children:"Bill To"}),(0,b.jsx)(p.fz,{sx:{mb:2},children:N?N.name:null}),(0,b.jsx)(p.fz,{sx:{whiteSpace:"pre"},children:N?N.address:null})]})]}),(0,b.jsxs)(z,{children:[(0,b.jsx)(d.A,{children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(h.A,{children:"#"}),(0,b.jsx)(h.A,{align:"center",children:"Item Name"}),(0,b.jsx)(h.A,{align:"center",children:"Unit Price"}),(0,b.jsx)(h.A,{align:"center",children:"Unit"}),(0,b.jsx)(h.A,{align:"center",children:"Cost"})]})}),(0,b.jsx)(m.A,{children:W.map(((e,n)=>(S+=e.unit*e.price,(0,b.jsxs)(x.A,{children:[(0,b.jsx)(h.A,{align:"left",children:n+1}),(0,b.jsx)(h.A,{align:"center",children:e.name}),(0,b.jsxs)(h.A,{align:"center",children:["$",e.price]}),(0,b.jsx)(h.A,{align:"center",children:e.unit}),(0,b.jsxs)(h.A,{align:"center",children:["$",e.unit*e.price]})]},n))))})]}),(0,b.jsxs)(s.A,{px:2,py:1,maxWidth:300,marginLeft:"auto",children:[(0,b.jsxs)(u.Ao,{my:2,children:[(0,b.jsx)(p.fz,{children:"Sub Total:"}),(0,b.jsxs)(p.fz,{children:["$",S]})]}),(0,b.jsxs)(u.Ao,{my:2,children:[(0,b.jsx)(p.fz,{children:"Vat(%):"}),(0,b.jsx)(p.fz,{children:M})]}),(0,b.jsxs)(u.Ao,{children:[(0,b.jsx)(p.H5,{children:"Grand Total:"}),(0,b.jsxs)(p.H5,{children:["$",S+=S*M/100]})]})]})]})]})}},9413:(e,n,t)=>{t.d(n,{A:()=>f});var r=t(8587),a=t(8168),s=t(5043),i=t(8387),l=t(8606),o=t(4535),c=t(2876),d=t(7056),x=t(2400);function h(e){return(0,x.Ay)("MuiFormGroup",e)}(0,d.A)("MuiFormGroup",["root","row","error"]);var m=t(5213),u=t(4827),p=t(579);const A=["className","row"],j=(0,o.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.row&&n.row]}})((e=>{let{ownerState:n}=e;return(0,a.A)({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})})),f=s.forwardRef((function(e,n){const t=(0,c.A)({props:e,name:"MuiFormGroup"}),{className:s,row:o=!1}=t,d=(0,r.A)(t,A),x=(0,m.A)(),f=(0,u.A)({props:t,muiFormControl:x,states:["error"]}),g=(0,a.A)({},t,{row:o,error:f.error}),v=(e=>{const{classes:n,row:t,error:r}=e,a={root:["root",t&&"row",r&&"error"]};return(0,l.A)(a,h,n)})(g);return(0,p.jsx)(j,(0,a.A)({className:(0,i.A)(v.root,s),ownerState:g,ref:n},d))}))},4714:(e,n,t)=>{t.d(n,{A:()=>m});var r=t(8168),a=t(8587),s=t(5043),i=t(9413),l=t(5849),o=t(4516),c=t(2487),d=t(5879),x=t(579);const h=["actions","children","defaultValue","name","onChange","value"],m=s.forwardRef((function(e,n){const{actions:t,children:m,defaultValue:u,name:p,onChange:A,value:j}=e,f=(0,a.A)(e,h),g=s.useRef(null),[v,b]=(0,o.A)({controlled:j,default:u,name:"RadioGroup"});s.useImperativeHandle(t,(()=>({focus:()=>{let e=g.current.querySelector("input:not(:disabled):checked");e||(e=g.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const y=(0,l.A)(n,g),w=(0,d.A)(p),C=s.useMemo((()=>({name:w,onChange(e){b(e.target.value),A&&A(e,e.target.value)},value:v})),[w,A,b,v]);return(0,x.jsx)(c.A.Provider,{value:C,children:(0,x.jsx)(i.A,(0,r.A)({role:"radiogroup",ref:y},f,{children:m}))})}))},2487:(e,n,t)=>{t.d(n,{A:()=>r});const r=t(5043).createContext(void 0)},4256:(e,n,t)=>{t.d(n,{A:()=>R});var r=t(8587),a=t(8168),s=t(5043),i=t(8387),l=t(8606),o=t(310),c=t(3064),d=t(2876),x=t(6734),h=t(579);const m=(0,x.A)((0,h.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),u=(0,x.A)((0,h.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var p=t(4535);const A=(0,p.Ay)("span",{shouldForwardProp:p.ep})({position:"relative",display:"flex"}),j=(0,p.Ay)(m)({transform:"scale(1)"}),f=(0,p.Ay)(u)((e=>{let{theme:n,ownerState:t}=e;return(0,a.A)({left:0,position:"absolute",transform:"scale(0)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeIn,duration:n.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.shortest})})}));const g=function(e){const{checked:n=!1,classes:t={},fontSize:r}=e,s=(0,a.A)({},e,{checked:n});return(0,h.jsxs)(A,{className:t.root,ownerState:s,children:[(0,h.jsx)(j,{fontSize:r,className:t.background,ownerState:s}),(0,h.jsx)(f,{fontSize:r,className:t.dot,ownerState:s})]})};var v=t(6803),b=t(6593),y=t(2487);var w=t(7056),C=t(2400);function z(e){return(0,C.Ay)("MuiRadio",e)}const S=(0,w.A)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),k=["checked","checkedIcon","color","icon","name","onChange","size","className"],N=(0,p.Ay)(c.A,{shouldForwardProp:e=>(0,p.ep)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,"medium"!==t.size&&n["size".concat((0,v.A)(t.size))],n["color".concat((0,v.A)(t.color))]]}})((e=>{let{theme:n,ownerState:t}=e;return(0,a.A)({color:(n.vars||n).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===t.color?n.vars.palette.action.activeChannel:n.vars.palette[t.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,o.X4)("default"===t.color?n.palette.action.active:n.palette[t.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{["&.".concat(S.checked)]:{color:(n.vars||n).palette[t.color].main}},{["&.".concat(S.disabled)]:{color:(n.vars||n).palette.action.disabled}})}));const I=(0,h.jsx)(g,{checked:!0}),W=(0,h.jsx)(g,{}),R=s.forwardRef((function(e,n){var t,o;const c=(0,d.A)({props:e,name:"MuiRadio"}),{checked:x,checkedIcon:m=I,color:u="primary",icon:p=W,name:A,onChange:j,size:f="medium",className:g}=c,w=(0,r.A)(c,k),C=(0,a.A)({},c,{color:u,size:f}),S=(e=>{const{classes:n,color:t,size:r}=e,s={root:["root","color".concat((0,v.A)(t)),"medium"!==r&&"size".concat((0,v.A)(r))]};return(0,a.A)({},n,(0,l.A)(s,z,n))})(C),R=s.useContext(y.A);let M=x;const P=(0,b.A)(j,R&&R.onChange);let E=A;var _,O;return R&&("undefined"===typeof M&&(_=R.value,M="object"===typeof(O=c.value)&&null!==O?_===O:String(_)===String(O)),"undefined"===typeof E&&(E=R.name)),(0,h.jsx)(N,(0,a.A)({type:"radio",icon:s.cloneElement(p,{fontSize:null!=(t=W.props.fontSize)?t:f}),checkedIcon:s.cloneElement(m,{fontSize:null!=(o=I.props.fontSize)?o:f}),ownerState:C,classes:S,name:E,checked:M,onChange:P,ref:n,className:(0,i.A)(S.root,g)},w))}))},6593:(e,n,t)=>{t.d(n,{A:()=>r});const r=t(4708).A},5879:(e,n,t)=>{t.d(n,{A:()=>r});const r=t(992).A}}]);
//# sourceMappingURL=8834.64a06e9b.chunk.js.map