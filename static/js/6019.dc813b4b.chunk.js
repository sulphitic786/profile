"use strict";(self.webpackChunkmatx_react=self.webpackChunkmatx_react||[]).push([[6019],{340:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var i=n(4535),a=n(2788),l=n(2110),o=n(6446),r=n(9336),s=n(8903),c=n(2143),d=n(4208),u=n(4912),m=n(8977),h=n(8393),p=n(8147),g=n(6032),v=n(718),x=n(2351),j=n(3288),y=n(9787),b=n(3516),f=n(3812),_=n(5043),C=n(8900),w=n(7965),A=(n(7245),n(899)),B=n(579);const k=(0,i.Ay)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),S=(0,i.Ay)(a.A)({marginBottom:"16px"}),q=(0,i.Ay)("form")({paddingLeft:"16px",paddingRight:"16px"}),z=(0,i.Ay)(x.aZ)((e=>{let{isDragActive:t,theme:n}=e;return{height:160,width:"100%",cursor:"pointer",borderRadius:"4px",marginBottom:"16px",transition:"all 350ms ease-in-out",border:"2px dashed rgba(".concat((0,y.zs)(n.palette.text.primary),", 0.3)"),"&:hover":{background:"rgb(".concat((0,y.zs)(n.palette.text.primary),", 0.2) !important")},background:t?"rgb(0, 0, 0, 0.15)":"rgb(0, 0, 0, 0.01)"}})),T=["active","inactive"],D=["Dashboard","E-commerce","Blogs","Portfolios","Business","Educational","Personal","Non-profit and Charity","Government","Travel and Tourism","Real Estate","Technology","Health and Wellness","News and Information","Media and Entertainment","Social Networking"],P=e=>{const[t,n]=(0,_.useState)([]),[i,a]=(0,_.useState)([]),[P,E]=(0,_.useState)(!1),{getRootProps:W,getInputProps:N,acceptedFiles:R}=(0,C.VB)({accept:{"image/*":[".jpg",".png"]}}),{showAlert:I}=(0,f.M)(),Y=(0,p.c7)();let H=null===e||void 0===e?void 0:e.updateData;const L=A.Ik().shape({name:A.Yj().required("Name is required!"),technology:A.Yj().required("Technology (Like -> Html, Css) is required!"),category:A.Yj().required("Category is required!"),status:A.Yj().required("Status is required!"),description:A.Yj().required("Description is required!")});let F={name:(null===H||void 0===H?void 0:H.name)||"",live_url:(null===H||void 0===H?void 0:H.live_url)||"",client:(null===H||void 0===H?void 0:H.client)||"",client_region:(null===H||void 0===H?void 0:H.client_region)||"",client_email:(null===H||void 0===H?void 0:H.client_email)||"",client_phone:(null===H||void 0===H?void 0:H.client_phone)||"",description:(null===H||void 0===H?void 0:H.description)||"",category:(null===H||void 0===H?void 0:H.category)||"",status:(null===H||void 0===H?void 0:H.status)||"",technology:(null===H||void 0===H?void 0:H.technology)||"",images:(null===H||void 0===H?void 0:H.images)||[],project_duration:(null===H||void 0===H?void 0:H.project_duration)||[],description:(null===H||void 0===H?void 0:H.description)||"",created_at:(null===H||void 0===H?void 0:H.created_at)||(0,y.q0)(),updated_at:(0,y.q0)()};(0,_.useEffect)((()=>{null!==H&&void 0!==H&&H.project_duration&&a(null===H||void 0===H?void 0:H.project_duration)}),[H]),(0,_.useEffect)((()=>{n(R)}),[R]);const K=async t=>{E(!0);try{const n=[];await Promise.all(R.map((async e=>{const t=(0,p.KR)(Y,"project-files/"+e.name);await(0,p.D)(t,e);const i=await(0,p.qk)(t);n.push(i)})));const i={...t,images:n};await(0,g.gS)((0,g.rJ)(v.ed,"projects"),i),I("success","Project data added successfully!"),E(!1),e.fetchData(),e.back()}catch(n){E(!1),I("error","Error while adding project data!"),console.error("Error uploading images:",n)}},M=async t=>{E(!0);try{const n=[];null!==R&&void 0!==R&&R.length&&await Promise.all(R.map((async e=>{const t=(0,p.KR)(Y,"project-files/"+e.name);await(0,p.D)(t,e);const i=await(0,p.qk)(t);n.push(i)})));const i=(0,g.H9)(v.ed,"projects",H.id);await(0,g.mZ)(i,{...t,images:n.length?n:t.images}),E(!1),I("success","Project data updated successfully!"),e.fetchData(),e.back()}catch(n){E(!1),I("error","Error while updating project data!"),console.error("Error uploading images:",n)}};return(0,B.jsxs)(k,{children:[P&&(0,B.jsx)(h.Tr,{}),(0,B.jsxs)(l.A,{elevation:3,children:[(0,B.jsx)(o.A,{p:2,display:"flex",children:(0,B.jsx)(j.H4,{children:"update"==(null===e||void 0===e?void 0:e.action)?"Update Project":"Add New Project"})}),(0,B.jsx)(r.A,{sx:{mb:3}}),(0,B.jsx)(b.l1,{onSubmit:async t=>{t.project_duration=i,"update"==(null===e||void 0===e?void 0:e.action)?M(t):K(t)},initialValues:F,validationSchema:L,children:n=>{let{values:l,errors:o,touched:h,resetForm:p,handleChange:g,handleBlur:v,handleSubmit:j}=n;return(0,B.jsxs)(q,{onSubmit:j,children:[(0,B.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,B.jsxs)(s.Ay,{item:!0,sm:6,xs:12,children:[(0,B.jsx)(S,{fullWidth:!0,name:"name",label:"Name *",size:"small",variant:"outlined",onBlur:v,onChange:g,value:l.name||"",error:Boolean(h.name&&o.name),helperText:h.name&&o.name}),(0,B.jsx)(S,{fullWidth:!0,size:"small",name:"live_url",variant:"outlined",label:"Live Url",onChange:g,value:l.live_url||""}),(0,B.jsx)(w.A,{options:{mode:"range"},className:"form-control mb-3",name:"project_duration",placeholder:"Project Duration",value:i,onChange:e=>{var t,n;const i=null===(t=e[0])||void 0===t?void 0:t.toISOString(),l=null===(n=e[1])||void 0===n?void 0:n.toISOString();a([i,l])}}),(0,B.jsx)(S,{select:!0,fullWidth:!0,size:"small",name:"status",label:"Status *",variant:"outlined",onBlur:v,onChange:g,value:l.status||"",error:Boolean(h.status&&o.status),helperText:h.status&&o.status,children:T.sort().map((e=>(0,B.jsx)(c.A,{value:e,children:e},e)))}),(0,B.jsx)(S,{fullWidth:!0,rows:2,multiline:!0,size:"small",name:"technology",variant:"outlined",label:"Technology or Language *",onBlur:v,onChange:g,value:l.technology||"",error:Boolean(h.technology&&o.technology),helperText:h.technology&&o.technology}),(0,B.jsxs)(z,{...W(),children:[(0,B.jsx)("input",{...N()}),(0,B.jsxs)(x.pT,{alignItems:"center",flexDirection:"column",children:[(0,B.jsx)(d.A,{sx:{color:"text.secondary",fontSize:"48px"},children:"publish"}),t.length?(0,B.jsxs)("span",{children:[t.length," images were selected"]}):(0,B.jsx)("span",{children:"Drop project images"})]})]})]}),(0,B.jsxs)(s.Ay,{item:!0,sm:6,xs:12,children:[(0,B.jsx)(S,{select:!0,fullWidth:!0,size:"small",name:"category",label:"Category *",variant:"outlined",onBlur:v,onChange:g,value:l.category||"",error:Boolean(h.category&&o.category),helperText:h.category&&o.category,children:D.sort().map((e=>(0,B.jsx)(c.A,{value:e,children:e},e)))}),(0,B.jsx)(S,{fullWidth:!0,name:"client",label:"Client",size:"small",variant:"outlined",onChange:g,value:l.client||""}),(0,B.jsx)(S,{fullWidth:!0,name:"client_region",size:"small",label:"Client Region",variant:"outlined",onChange:g,value:l.client_region||""}),(0,B.jsx)(S,{fullWidth:!0,size:"small",type:"email",name:"client_email",label:"Client Email",variant:"outlined",onChange:g,value:l.client_email||"",onBlur:v,error:Boolean(h.client_email&&o.client_email),helperText:h.client_email&&o.client_email}),(0,B.jsx)(S,{fullWidth:!0,size:"small",type:"number",name:"client_phone",label:"Client Phone",variant:"outlined",onChange:g,value:l.client_phone||""}),(0,B.jsx)(S,{fullWidth:!0,rows:5,multiline:!0,size:"small",name:"description",variant:"outlined",label:"Description *",value:l.description||"",onChange:g,onBlur:v,error:Boolean(h.description&&o.description),helperText:h.description&&o.description})]})]}),(0,B.jsx)(r.A,{sx:{mb:2}}),(0,B.jsxs)(u.A,{direction:"row",className:"mb-3",spacing:2,justifyContent:"flex-end",children:[(0,B.jsx)(m.A,{variant:"outlined",color:"secondary",onClick:()=>e.back(),children:"Cancel"}),(0,B.jsx)(m.A,{type:"submit",color:"primary",variant:"contained",justifyContent:"flex-end",sx:{mb:2,px:6},children:"Submit"})]})]})}})]})]})}}}]);
//# sourceMappingURL=6019.dc813b4b.chunk.js.map